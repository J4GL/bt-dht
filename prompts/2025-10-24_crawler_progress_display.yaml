original_prompt: "When using CRAWLER mode with INFINITE duration display the progress"

optimized_prompt: |
  Enhance the BitTorrent DHT scraper's CRAWLER mode to display comprehensive real-time progress information when running with INFINITE duration (--timeout 0).

  Requirements:
  1. Add a dynamic progress display that updates in-place (using carriage return or ANSI codes)
  2. Display the following metrics in real-time:
     - Elapsed time (HH:MM:SS format)
     - Total unique info_hashes discovered
     - Discovery rate (info_hashes per minute)
     - Total requests received
     - Current routing table size
  3. Maintain the existing line-by-line discovery output
  4. Add a summary line that updates continuously
  5. Ensure the display works well with keyboard interrupts (Ctrl+C)
  6. Make the progress display only active for INFINITE mode (timeout=0)

  Technical considerations:
  - Use ANSI escape codes for in-place updates
  - Calculate rolling average for discovery rate
  - Thread-safe updates if needed
  - Clean output formatting
  - Graceful handling of terminal resize

  Security & Quality:
  - No new attack surface (display only)
  - Follow existing code patterns
  - Write unit tests for time formatting and rate calculation functions
  - Write end-to-end test to verify the enhanced display works correctly

date: 2025-10-24
context: "BitTorrent DHT Scraper (scraper.py) - CRAWLER mode enhancement"
